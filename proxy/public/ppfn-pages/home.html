<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=all" />
  <title>Home</title>
</head>
<body>
  <div id="starfield"></div>
  <div class="container">
    <div class="logo-title">
      <img src="/ppfn-unblocker/ppfn.png" alt="PPFN Logo" class="logo">
      <h1>PPFN Unblocker</h1>
      <p class="subtitle">A fast, modern proxy for school & work</p>
    </div>
    <form id="search-form" autocomplete="off">
      <div class="search-bar">
        <input type="text" name="Search" id="q" placeholder="Search or enter a URL..." autofocus>
        <button id="search" type="submit"><span class="material-symbols-outlined">search</span></button>
      </div>
    </form>
    <div class="quick-links">
      <span>Quick Links:</span>
      <a href="#" id="google-link">Google</a>
      <a href="#" id="youtube-link">YouTube</a>
    </div>
  </div>
</body>
</html>
<style>
  :root {
    --primary-bg: #1c1c25;
    --nav-bg: #191936;
    --accent-bg: #4c4c66;
    --text-color: #c9c9eb;
    --spinner-bg: rgba(28,28,37,0.7);
    --hover-bg: #2d2d3d;
    --settings-panel-bg: #191936;
    --settings-overlay-bg: rgba(0,0,0,0.5);
    --border-color: #4c4c66;
  }
  body {
    /* Make the background much darker than --primary-bg */
    font-family: Arial, Helvetica, sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    color: var(--text-color);
    background-attachment: fixed;
    background-image:
        linear-gradient(135deg,
            rgba(110, 60, 180, 0.2) 0%,
            rgba(90, 50, 160, 0.15) 30%,
            rgba(40, 200, 150, 0.15) 70%,
            rgba(20, 180, 130, 0.2) 100%
        );
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
  }

#starfield {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 100; /* Behind your content */
    overflow: hidden;
    pointer-events: none;
}

.star {
    position: absolute;
    background-color: white;
    border-radius: 50%;
    opacity: 0.5;
    animation: twinkleStar 4s infinite ease-in-out alternate;
}

@keyframes twinkleStar {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}
  .container {
    background: var(--nav-bg);
    border-radius: 24px;
    box-shadow: 0 4px 24px 0 rgba(0,0,0,0.25);
    padding: 40px 32px 32px 32px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 350px;
    max-width: 95vw;
    z-index: 200;
  }
  .logo-title {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 32px;
  }
  .logo {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    margin-bottom: 12px;
    box-shadow: 0 2px 12px 0 rgba(0,0,0,0.18);
  }
  h1 {
    margin: 0 0 6px 0;
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--accent-bg);
    letter-spacing: 1px;
  }
  .subtitle {
    margin: 0 0 10px 0;
    font-size: 1.1rem;
    color: #b0b0b0;
    font-weight: 400;
  }
  .search-bar {
    display: flex;
    align-items: center;
    background: var(--primary-bg);
    border-radius: 100px;
    box-shadow: 0 2px 8px 0 rgba(0,0,0,0.10);
    padding: 6px 10px 6px 18px;
    width: 350px;
    max-width: 90vw;
    margin-bottom: 18px;
  }
  input[type="text"]{
    flex: 1;
    padding: 12px 10px;
    border: none;
    border-radius: 100px;
    background: transparent;
    color: var(--text-color);
    font-size: 1.1rem;
    outline: none;
    background-color: transparent;
  }
  input[type="text"]::placeholder {
    color: #b0b0b0;
    opacity: 1;
    font-style: italic;
  }
  button#search{
    padding: 0 18px;
    border: none;
    border-radius: 100px;
    background-color: var(--nav-bg);
    color: var(--text-color);
    font-size: 1.5rem;
    cursor: pointer;
    transition: background 0.2s;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: none;
  }
  button#search:hover, button#search:focus {
    background: var(--accent-bg);
    color: #222;
  }
  .material-symbols-outlined {
    font-size: 1.7rem;
    vertical-align: middle;
  }
  .quick-links {
    margin-top: 12px;
    font-size: 1rem;
    color: #b0b0b0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }
  .quick-links span {
    font-weight: 600;
    color: var(--accent-bg);
    margin-bottom: 2px;
  }
  .quick-links a {
    color: var(--accent-bg);
    text-decoration: none;
    margin: 0 8px;
    font-weight: 500;
    transition: color 0.2s;
  }
  .quick-links a:hover {
    color: #fff;
    text-decoration: underline;
  }
  @media (max-width: 500px) {
    .container {
      padding: 18px 4vw 18px 4vw;
      min-width: unset;
      border-radius: 0;
    }
    .search-bar {
      width: 95vw;
      padding: 4px 4px 4px 10px;
    }
    input[type="text"] {
      font-size: 1rem;
    }
  }
</style>
<script>
  const starCount = 1000;  // Adjust for density
const starfield = document.getElementById('starfield');

function random(min, max) {
    return Math.random() * (max - min) + min;
}

for (let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.classList.add('star');

    const size = random(0.5, 3);  // Vary star sizes
    star.style.width = `${size}px`;
    star.style.height = `${size}px`;

    star.style.top = `${random(0, window.innerHeight)}px`;
    star.style.left = `${random(0, window.innerWidth)}px`;

    star.style.opacity = Math.random() * 0.8 + 0.2;
    star.style.animationDuration = `${random(3, 8)}s`;

    starfield.appendChild(star);
}
// Try to sync theme from parent if available
(function syncThemeFromParent() {
  function applyThemeFromParent() {
    try {
      if (window.parent && window.parent !== window) {
        const root = document.documentElement;
        const parentStyles = window.parent.getComputedStyle(window.parent.document.documentElement);
        [
          '--primary-bg',
          '--nav-bg',
          '--accent-bg',
          '--text-color',
          '--spinner-bg',
          '--hover-bg',
          '--settings-panel-bg',
          '--settings-overlay-bg',
          '--border-color'
        ].forEach(varName => {
          const val = parentStyles.getPropertyValue(varName);
          if (val) root.style.setProperty(varName, val);
        });
        // Make background even darker than --primary-bg
        const parentPrimary = parentStyles.getPropertyValue('--primary-bg').trim();
        if (parentPrimary) {
          function darkenColor(color, amount) {
            let r, g, b;
            if (color.startsWith('hsl')) {
              const hsl = color.match(/(\d+),\s*(\d+)%?,\s*(\d+)%?/);
              if (hsl) {
                let h = +hsl[1], s = +hsl[2], l = +hsl[3];
                l = Math.max(0, l - amount);
                return `hsl(${h},${s}%,${l}%)`;
              }
            } else if (color.startsWith('#')) {
              color = color.replace('#','');
              if (color.length === 3) color = color.split('').map(x=>x+x).join('');
              r = parseInt(color.substr(0,2),16);
              g = parseInt(color.substr(2,2),16);
              b = parseInt(color.substr(4,2),16);
            } else if (color.startsWith('rgb')) {
              const rgb = color.match(/(\d+),\s*(\d+),\s*(\d+)/);
              if (rgb) {
                r = +rgb[1]; g = +rgb[2]; b = +rgb[3];
              }
            }
            if (typeof r !== "undefined") {
              r = Math.max(0, r - amount*2);
              g = Math.max(0, g - amount*2);
              b = Math.max(0, b - amount*2);
              return `rgb(${r},${g},${b})`;
            }
            return color;
          }
          root.style.setProperty('background-color', darkenColor(parentPrimary, 25));
          document.body.style.backgroundColor = darkenColor(parentPrimary, 25);
        }
      }
    } catch (e) {}
  }
  // Initial sync
  applyThemeFromParent();

  // Listen for theme changes from parent via postMessage
  window.addEventListener('message', function(event) {
    if (event && event.data && event.data.type === 'ppfn-theme-update') {
      applyThemeFromParent();
    }
  });
})();
</script>
<script>
// Helper to proxy a URL via the parent window
function proxyNavigate(url) {
  if (window.parent && window.parent !== window) {
    window.parent.document.getElementById('url').textContent = url;
    const event = new KeyboardEvent('keydown', { key: 'Enter' });
    window.parent.document.getElementById('url').dispatchEvent(event);
  } else {
    window.location.href = url;
  }
}

// Handle search submit (proxy search or URL)
document.getElementById('search-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const val = document.getElementById('q').value.trim();
  document.getElementById('q').blur();

  // Simple URL check
  let url;
  if (/^(https?:\/\/|ppfn:\/\/)/i.test(val)) {
    url = val;
  } else if (/^[\w-]+\.[\w-]+/.test(val)) {
    url = 'https://' + val;
  } else {
    url = 'https://duckduckgo.com/?q=' + encodeURIComponent(val) + '&ia=web';
  }
  proxyNavigate(url);
});

document.getElementById('google-link').addEventListener('click', function(e) {
  e.preventDefault();
  proxyNavigate('https://www.google.com/');
});
document.getElementById('youtube-link').addEventListener('click', function(e) {
  e.preventDefault();
  proxyNavigate('https://www.youtube.com/');
});
window.parent.document.getElementById('url').textContent = "ppfn://home";
</script>